# Lesson 1: Hybrid Approach Introduction

## Tujuan
- Understand why hybrid approach (MediaPipe + DeepFace)
- Setup DeepFace dengan Facenet512 model
- Generate face encodings dari database
- Compare accuracy: Basic (MediaPipe) vs Hybrid

## Why Hybrid?

### Performance Comparison

| Method | Detection Speed | Recognition Accuracy | Real-time? |
|--------|----------------|---------------------|-----------|
| **MediaPipe only** (Week 3) | 10-15ms ‚ö° | ~85% ‚ö†Ô∏è | ‚úÖ Yes (30+ FPS) |
| **DeepFace only** | 150-200ms ‚ö†Ô∏è | 97%+ ‚úÖ | ‚ùå No (5 FPS) |
| **Hybrid** (Week 5) | 110-165ms üöÄ | 97%+ ‚úÖ | ‚úÖ Yes (6-9 FPS) |

### Best of Both Worlds
- **MediaPipe:** Fast detection (10-15ms)
- **DeepFace:** Accurate recognition (97%+)
- **Combined:** Real-time + Production-grade accuracy

## Face Encoding

### What is Face Encoding?
- 512-dimensional numerical vector (embedding)
- Represents unique facial features
- Generated by DeepFace Facenet512 model
- Used for comparing faces (similarity)

### How It Works
```
Face Image ‚Üí DeepFace Model ‚Üí 512-d Vector ‚Üí Store to Database

Example encoding:
[0.234, -0.456, 0.789, ..., 0.123]  # 512 numbers
```

## Files
1. **`encoding_generator.py`** - Generate encodings with DeepFace
2. **`main.py`** - Complete workflow (load from DB ‚Üí generate encodings)

## Yang Dipelajari
1. Install DeepFace dependencies (tensorflow, deepface)
2. Load persons from database (Week 4)
3. Generate face encodings with Facenet512
4. Store encodings to `face_encodings` table
5. Measure encoding time & accuracy
6. Compare with MediaPipe-only approach

## Prerequisites
```bash
# Install DeepFace (if not installed)
pip install deepface==0.0.89
pip install tensorflow==2.15.0
pip install tf-keras==2.15.0
```

**Database from Week 4:**
- Pastikan XAMPP MySQL running
- Database `face_recognition_db` sudah ada
- Tables `persons` dan `face_images` sudah berisi data
- Check di HeidiSQL: persons table harus ada minimal 1 person dengan images

## Langkah
1. **Start XAMPP MySQL** (pastikan running)
2. **Check database di HeidiSQL**: Pastikan `persons` dan `face_images` ada data
3. **Run encoding generator**: `python main.py`
4. **Wait for model download** (first run only, ~100MB Facenet512 model)
5. **Check encodings di HeidiSQL**: 
   - Refresh database
   - Buka table `face_encodings`
   - Lihat encoding_data (BLOB) untuk setiap person

## Output
```
üîß Loading DeepFace model: Facenet512
‚úÖ Model loaded! (size: 512-d embeddings)

üìä Loading persons from database...
‚úÖ Found 2 persons with 40 total images

üéØ Generating encodings...
   Person: Alice (EMP0001)
      Image 1/20: ‚úÖ Encoded (0.142s)
      Image 2/20: ‚úÖ Encoded (0.138s)
      ...
   ‚úÖ Alice: 20/20 encodings generated

   Person: Bob (EMP0002)
      ...
   ‚úÖ Bob: 20/20 encodings generated

‚úÖ COMPLETE!
Total encodings: 40
Average time: 0.145s per image
Database updated: face_encodings table

üí° Next: Lesson 2 - Recognition Service with hybrid approach!
```

## DeepFace Models (Optional)

| Model | Embedding Size | Accuracy | Speed |
|-------|---------------|----------|-------|
| **Facenet512** (Default) | 512-d | 97.3% | Medium |
| ArcFace | 512-d | 99.4% | Slower |
| SFace | 128-d | 95.2% | Faster |
| VGG-Face | 4096-d | 95.7% | Slow |

**Recommendation:** Stick with Facenet512 (best balance)

## Why This Matters
- **Production accuracy:** 97%+ vs 85% MediaPipe-only
- **Real-time capable:** 6-9 FPS vs 5 FPS pure DeepFace
- **Scalable:** Encodings stored once, compared millions of times
- **Industry standard:** Used by Facebook, Google, Microsoft

## Next: Lesson 2
Build **RecognitionService** dengan real-time webcam recognition!
